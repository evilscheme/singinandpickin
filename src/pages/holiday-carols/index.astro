---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// Get all holiday carols
const carols = await getCollection('holiday-carols');
const sortedCarols = carols.sort((a, b) => {
  if (a.data.order && b.data.order) return a.data.order - b.data.order;
  return a.data.title.localeCompare(b.data.title);
});
---

<BaseLayout title="Holiday Carols">
  <div class="bg-gradient-to-b from-sage-800 to-sage-900 text-white py-16">
    <div class="max-w-6xl mx-auto px-4 text-center">
      <span class="text-6xl mb-4 block" aria-hidden="true">ðŸŽ„</span>
      <h1 class="font-serif text-4xl md:text-5xl font-bold text-amber-400 mb-4">Holiday Carols</h1>
      <p class="text-sage-200 text-lg max-w-2xl mx-auto">
        Our special collection of holiday favorites for December gatherings.
        Sing along with these timeless classics!
      </p>
    </div>
  </div>

  <div class="max-w-4xl mx-auto px-4 py-12">
    <div class="grid gap-4">
      {sortedCarols.map((carol, index) => (
        <a
          href={`/holiday-carols/${carol.slug}`}
          class="card p-6 flex items-center gap-6 group"
        >
          <div class="w-12 h-12 rounded-full bg-sage-100 text-sage-700 flex items-center justify-center font-serif text-lg font-bold flex-shrink-0 group-hover:bg-amber-100 group-hover:text-amber-700 transition-colors">
            {index + 1}
          </div>

          <div class="flex-grow">
            <h2 class="font-serif text-xl font-semibold text-earth-900 group-hover:text-amber-700 transition-colors">
              {carol.data.title}
            </h2>
            {carol.data.artist && (
              <p class="text-earth-500 text-sm">{carol.data.artist}</p>
            )}
          </div>

          {carol.data.key && (
            <div class="text-earth-400 text-sm flex-shrink-0">
              Key of {carol.data.key}
            </div>
          )}

          <svg class="w-5 h-5 text-earth-300 group-hover:text-amber-500 group-hover:translate-x-1 transition-all flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
          </svg>
        </a>
      ))}
    </div>

    {sortedCarols.length === 0 && (
      <div class="text-center py-12 text-earth-500">
        <span class="text-4xl mb-4 block">ðŸŽµ</span>
        <p>Holiday carols coming soon!</p>
      </div>
    )}
  </div>
</BaseLayout>
