---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
}

const { title, description = "A monthly gathering of friends sharing songs, chords, and good times." } = Astro.props;
const currentPath = Astro.url.pathname;

function isActive(path: string): boolean {
  if (path === '/') return currentPath === '/';
  return currentPath.startsWith(path);
}
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title} | Singin' and Pickin'</title>
  </head>
  <body class="min-h-screen flex flex-col">
    <header class="bg-earth-900 text-earth-100 sticky top-0 z-50">
      <nav class="max-w-6xl mx-auto px-4 py-4">
        <div class="flex items-center justify-between">
          <a href="/" class="flex items-center gap-3 group">
            <span class="text-3xl" aria-hidden="true">ðŸŽ¸</span>
            <span class="font-serif text-xl font-semibold text-amber-400 group-hover:text-amber-300 transition-colors">
              Singin' and Pickin'
            </span>
          </a>

          <ul class="flex items-center gap-6">
            <li>
              <a
                href="/"
                class:list={[
                  "text-sm font-medium transition-colors",
                  isActive('/') && currentPath === '/' ? "text-amber-400" : "text-earth-300 hover:text-amber-400"
                ]}
              >
                Home
              </a>
            </li>
            <li>
              <a
                href="/archive"
                class:list={[
                  "text-sm font-medium transition-colors",
                  isActive('/archive') ? "text-amber-400" : "text-earth-300 hover:text-amber-400"
                ]}
              >
                Archive
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </header>

    <main class="flex-grow">
      <slot />
    </main>

    <footer class="bg-earth-900 text-earth-400 py-8 mt-auto">
      <div class="max-w-6xl mx-auto px-4 text-center">
        <p class="font-serif text-lg text-amber-400 mb-2">Singin' and Pickin'</p>
        <p class="text-sm">A monthly gathering of friends sharing songs, chords, and good times.</p>
        <p class="text-xs mt-4 text-earth-500">Â© {new Date().getFullYear()}</p>
      </div>
    </footer>
  </body>
</html>
