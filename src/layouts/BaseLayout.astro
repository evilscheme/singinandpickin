---
import '../styles/global.css';

interface Props {
  title: string;
  description?: string;
}

const { title, description = "A monthly gathering of friends sharing songs, chords, and good times." } = Astro.props;
const currentPath = Astro.url.pathname;

function isActive(path: string): boolean {
  if (path === '/') return currentPath === '/';
  return currentPath.startsWith(path);
}
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content={description} />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{title} | Singin' and Pickin'</title>
  </head>
  <body class="min-h-screen flex flex-col">
    <header class="bg-earth-900 text-earth-100 sticky top-0 z-50">
      <nav class="max-w-6xl mx-auto px-4 py-4">
        <div class="flex items-center justify-between">
          <a href="/" class="flex items-center gap-2 sm:gap-3 group">
            <span class="text-2xl sm:text-3xl transition-transform duration-300 group-hover:scale-110" aria-hidden="true">ðŸª•</span>
            <span class="font-serif text-base sm:text-xl font-semibold text-amber-400 group-hover:text-amber-300 transition-colors whitespace-nowrap">
              Singin' and Pickin'
            </span>
            <span class="hidden sm:inline text-3xl transition-transform duration-300 group-hover:scale-110" aria-hidden="true">ðŸŽ»</span>
          </a>

          <ul class="flex items-center gap-8">
            <li>
              <a
                href="/"
                class:list={[
                  "text-sm font-medium transition-colors nav-link-animated",
                  isActive('/') && currentPath === '/' ? "text-amber-400" : "text-earth-300 hover:text-amber-400"
                ]}
              >
                Home
              </a>
            </li>
            <li>
              <a
                href="/archive"
                class:list={[
                  "text-sm font-medium transition-colors nav-link-animated",
                  isActive('/archive') ? "text-amber-400" : "text-earth-300 hover:text-amber-400"
                ]}
              >
                Archive
              </a>
            </li>
          </ul>
        </div>
      </nav>
      <!-- Gradient bottom border -->
      <div class="h-0.5 bg-gradient-to-r from-transparent via-amber-500/50 to-transparent"></div>
    </header>

    <main class="flex-grow">
      <slot />
    </main>

    <footer class="bg-earth-900 text-earth-400 mt-auto relative">
      <!-- Decorative top border -->
      <div class="h-1 bg-gradient-to-r from-earth-800 via-amber-600 to-earth-800"></div>

      <div class="max-w-6xl mx-auto px-4 py-10 text-center">
        <!-- Music note icon -->
        <div class="mb-4">
          <svg class="w-8 h-8 mx-auto text-amber-500/60" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
          </svg>
        </div>

        <p class="font-serif text-xl text-amber-400 mb-3">Singin' and Pickin'</p>
        <p class="text-sm text-earth-400">A monthly gathering of friends sharing songs, chords, and good times.</p>
        <p class="text-xs mt-6 text-earth-500">&copy; {new Date().getFullYear()}</p>
      </div>
    </footer>

    <!-- Scroll animation observer -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const observerOptions = {
          root: null,
          rootMargin: '0px 0px -50px 0px',
          threshold: 0.1
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach(entry => {
            if (entry.isIntersecting) {
              entry.target.classList.add('is-visible');
              observer.unobserve(entry.target);
            }
          });
        }, observerOptions);

        // Observe all elements with animate-on-scroll class
        document.querySelectorAll('.animate-on-scroll').forEach(el => {
          observer.observe(el);
        });
      });
    </script>
  </body>
</html>
